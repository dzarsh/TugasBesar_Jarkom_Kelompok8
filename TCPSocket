#import socket module
from socket import *
import sys

def TCPserver():
    #mengaitkan ke alamat dan port tertentu
    serverHost = 'localhost'
    serverPort = 8080
    
    #membuat TCP socket
    serverSocket = socket(AF_INET, SOCK_STREAM)
    serverSocket.setsockopt(SOL_SOCKET, SO_REUSEADDR, 1)

    #mendengarkan koneksi dari client
    serverSocket.bind((serverHost, serverPort))
    serverSocket.listen(1)

    while True:
        #menerima koneksi dari client
        print("Server Ready....")
        connectionSocket, addr = serverSocket.accept()

        #meminta 
        request = connectionSocket.recv(1024).decode()
        print("Dari client: "+request)

        #memberi respon 
        response = handleRequest()
        connectionSocket.send(response.encode())

        #menutup koneksi
        connectionSocket.close()

    #menutup server
    serverSocket.close()
    
def handleRequest():
    responseLine = "HTTP/1.1 200 OK\r\n"
    contentType = "Content-type: text/HTML\r\n\r\n"
    messageBody = "<HTML><body><h1>Hello Web Server<h1><body><HTML>"
    
    response = response_line+content_type+message_body
    return response
    
if _name_ == '_main_':
    TCPserver()
